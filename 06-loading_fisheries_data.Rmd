# Loading Fisheries Data

```{r include=FALSE}
knitr::opts_chunk$set(warning = F, message = F, error = F)
```

Next, you'll load the data you'll be using for the analysis using the `read_csv` function. First, create a new folder in your [working directory](#work-dir) called "_data". Next, download the following two files onto your computer. Right click on each link, and save it in your  "_data" folder.

[Right click and save-link-as to download landings data](https://raw.githubusercontent.com/SFG-UCSB/fishery-manageR/master/_data/sample_landings_data.csv)

[Right click and save-link-as to download life history data](https://raw.githubusercontent.com/SFG-UCSB/fishery-manageR/master/_data/life_history_parameters.csv)

Next, you'll load these two csv files into R. First load the landings data which includes catch, effort, and length measurements and store these data to a data frame called `landings_data`. Next, load the life history parameter data file and store these data to a data frame called `life_history_parameters`.

```{r}
landings_data <- read_csv("_data/sample_landings_data.csv")

life_history_parameters <- read_csv("_data/life_history_parameters.csv")
```

Let's take a quick look at what's in each of these data frames. We can use the `head` function to get a quick summary.

```{r}
head(landings_data)
```

The `landings_data` data frame is from a fishery-dependent landing site survey. The species included in this data set is *Caesio cuning*, a yellowtail fusilier. You can see the data frame has eight columns, with each row being an individual fish catch measurement. The columns include the year and date when the measurement was collected, the fishing trip ID, how many hours were fished for each trip, what gear was used, the species, the length of the fish, and the weight of the fish. We'll be able to use these data to create length-frequency histograms that describe the size structure of the population, as well as trends in catch and CPUE. 

One thing we should do is format the year and date columns to ensure that R knows these represent years and dates as we humans think of them. We can use the `mdy` and `year` functions from the lubridate package to do this, combined with the `mutate` function from the dplyr package. We start by taking the landings data frame we loaded into R, and working through a series of "pipes", designated by the `%>%` operation, which progressively analyzes the data from one step to the next. Essentially, the output of one line is fed into the input of the next line. 

```{r}
# Start with the landings data frame
landings_data <- landings_data %>% 
  # Turn the date column into a date format that R recognizes
  mutate(Date = mdy(Date)) %>% 
  # Create a year column using a year format R recognizes
  mutate(Year = year(Date))
```

One of the first things you should always do is quickly plot your raw data using `ggplot`. This can help you familiarize yourself with what's contained in the data set, as well as look for any potential outliers or errors. We will come back to a more detailed description of plots and visualizations later, but below is some quick code to look at things. When using `ggplot`, first start with your data frame and initialize the ggplot by specifying the plot's *aesthetics* (variables) using `aes()`. Then use the `+` operation to add at least one *geometry* (type of plot, such as a scatter plot) and any additional features to the plot. To learn more about `ggplot`, the [Data Visualization with ggplot2 Cheat Sheet](https://www.rstudio.com/wp-content/uploads/2016/11/ggplot2-cheatsheet-2.1.pdf) is a very helpful resource, as is this [ggplot cookbook](http://www.cookbook-r.com/Graphs/).


The first figure just shows a point for every weight measurement over time.

```{r}
# Start with the landings data frame
landings_data %>% 
  # Initialize a ggplot of weight measurements versus year
  ggplot(aes(x=Date,y=Weight_g)) +
  # Tell ggplot that the plot type should be a scatter plot
  geom_point()
```

The second figure shows a histogram of the length data.

```{r}
# Start with the landings data frame
landings_data %>% 
  # Initialize ggplot of data using the length column
  ggplot(aes(Length_cm)) +
  # Tell ggplot that the plot type should be a histogram
  geom_histogram()
```


Let's next look at the `life_history_parameters` data frame.

```{r}
head(life_history_parameters)
```
The `life_history_parameters` data frame includes several important life history parameters that were found doing a literature review of this species. *L_infinity*, *k*, and *t0* describe the age-to-length relationship using the von Bertalanffy growth equation. *M* represents natural mortality. *Wa* and *Wb* describe the length-to-weight relationship. *m50* and *m95* describe the lengths at which 50% and 95% of the fish are mature, respectively. *maxAge* is the maximum age of the fish.