<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>An introduction to basic fisheries analysis with R</title>
  <meta content="text/html; charset=UTF-8" http-equiv="Content-Type">
  <meta name="description" content="This is an introduction to using R for basic fisheries analysis">
  <meta name="generator" content="bookdown 0.3 and GitBook 2.6.7">

  <meta property="og:title" content="An introduction to basic fisheries analysis with R" />
  <meta property="og:type" content="book" />
  <meta property="og:url" content="https://sfg-ucsb.github.io/fishery-manageR/" />
  
  <meta property="og:description" content="This is an introduction to using R for basic fisheries analysis" />
  <meta name="github-repo" content="sfg-ucsb/fishery-manageR" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="An introduction to basic fisheries analysis with R" />
  
  <meta name="twitter:description" content="This is an introduction to using R for basic fisheries analysis" />
  




  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  <link rel="shortcut icon" href="images/SFG_BW.png" type="image/x-icon">
<link rel="prev" href="packages-1.html">
<link rel="next" href="basic-fisheries-statistics.html">

<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />









<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>


  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">An introduction to basic fisheries analysis with R</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Objective</a></li>
<li class="chapter" data-level="2" data-path="installation.html"><a href="installation.html"><i class="fa fa-check"></i><b>2</b> Installation</a><ul>
<li class="chapter" data-level="2.1" data-path="installation.html"><a href="installation.html#r"><i class="fa fa-check"></i><b>2.1</b> R</a></li>
<li class="chapter" data-level="2.2" data-path="installation.html"><a href="installation.html#rstudio"><i class="fa fa-check"></i><b>2.2</b> RStudio</a></li>
<li class="chapter" data-level="2.3" data-path="installation.html"><a href="installation.html#helpful-resources"><i class="fa fa-check"></i><b>2.3</b> Helpful Resources</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="getting-started-with-rstudio.html"><a href="getting-started-with-rstudio.html"><i class="fa fa-check"></i><b>3</b> Getting Started with RStudio</a><ul>
<li class="chapter" data-level="3.1" data-path="getting-started-with-rstudio.html"><a href="getting-started-with-rstudio.html#rstudio-interface"><i class="fa fa-check"></i><b>3.1</b> RStudio Interface</a></li>
<li class="chapter" data-level="3.2" data-path="getting-started-with-rstudio.html"><a href="getting-started-with-rstudio.html#work-dir"><i class="fa fa-check"></i><b>3.2</b> Working Directory</a><ul>
<li class="chapter" data-level="3.2.1" data-path="getting-started-with-rstudio.html"><a href="getting-started-with-rstudio.html#pathnames-path"><i class="fa fa-check"></i><b>3.2.1</b> Pathnames (Path)</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="getting-started-with-rstudio.html"><a href="getting-started-with-rstudio.html#packages"><i class="fa fa-check"></i><b>3.3</b> Packages</a></li>
<li class="chapter" data-level="3.4" data-path="getting-started-with-rstudio.html"><a href="getting-started-with-rstudio.html#helpful-resources-1"><i class="fa fa-check"></i><b>3.4</b> Helpful Resources</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="data-entry-management.html"><a href="data-entry-management.html"><i class="fa fa-check"></i><b>4</b> Data Entry &amp; Management</a><ul>
<li class="chapter" data-level="4.1" data-path="data-entry-management.html"><a href="data-entry-management.html#best-practices"><i class="fa fa-check"></i><b>4.1</b> Best Practices</a></li>
<li class="chapter" data-level="4.2" data-path="data-entry-management.html"><a href="data-entry-management.html#helpful-resources-2"><i class="fa fa-check"></i><b>4.2</b> Helpful Resources</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="r-as-a-programming-language.html"><a href="r-as-a-programming-language.html"><i class="fa fa-check"></i><b>5</b> R as a Programming Language</a><ul>
<li class="chapter" data-level="5.1" data-path="r-as-a-programming-language.html"><a href="r-as-a-programming-language.html#data-frames"><i class="fa fa-check"></i><b>5.1</b> Data frames</a></li>
<li class="chapter" data-level="5.2" data-path="r-as-a-programming-language.html"><a href="r-as-a-programming-language.html#vectors"><i class="fa fa-check"></i><b>5.2</b> Vectors</a></li>
<li class="chapter" data-level="5.3" data-path="r-as-a-programming-language.html"><a href="r-as-a-programming-language.html#functions"><i class="fa fa-check"></i><b>5.3</b> Functions</a></li>
<li class="chapter" data-level="5.4" data-path="r-as-a-programming-language.html"><a href="r-as-a-programming-language.html#tips-on-coding-and-style"><i class="fa fa-check"></i><b>5.4</b> Tips on coding and style</a></li>
<li class="chapter" data-level="5.5" data-path="r-as-a-programming-language.html"><a href="r-as-a-programming-language.html#helpful-resources-3"><i class="fa fa-check"></i><b>5.5</b> Helpful resources</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="data-cleaning-qaqc.html"><a href="data-cleaning-qaqc.html"><i class="fa fa-check"></i><b>6</b> Data Cleaning (QA/QC)</a><ul>
<li class="chapter" data-level="6.1" data-path="data-cleaning-qaqc.html"><a href="data-cleaning-qaqc.html#data-structure"><i class="fa fa-check"></i><b>6.1</b> Data structure</a></li>
<li class="chapter" data-level="6.2" data-path="data-cleaning-qaqc.html"><a href="data-cleaning-qaqc.html#missing-values"><i class="fa fa-check"></i><b>6.2</b> Missing values</a></li>
<li class="chapter" data-level="6.3" data-path="data-cleaning-qaqc.html"><a href="data-cleaning-qaqc.html#typos"><i class="fa fa-check"></i><b>6.3</b> Typos</a></li>
<li class="chapter" data-level="6.4" data-path="data-cleaning-qaqc.html"><a href="data-cleaning-qaqc.html#errors"><i class="fa fa-check"></i><b>6.4</b> Errors</a></li>
<li class="chapter" data-level="6.5" data-path="data-cleaning-qaqc.html"><a href="data-cleaning-qaqc.html#saving-clean-data"><i class="fa fa-check"></i><b>6.5</b> Saving clean data</a></li>
<li class="chapter" data-level="6.6" data-path="data-cleaning-qaqc.html"><a href="data-cleaning-qaqc.html#helpful-resources-4"><i class="fa fa-check"></i><b>6.6</b> Helpful Resources</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="packages-1.html"><a href="packages-1.html"><i class="fa fa-check"></i><b>7</b> Packages</a></li>
<li class="chapter" data-level="8" data-path="loading-fisheries-data.html"><a href="loading-fisheries-data.html"><i class="fa fa-check"></i><b>8</b> Loading Fisheries Data</a></li>
<li class="chapter" data-level="9" data-path="basic-fisheries-statistics.html"><a href="basic-fisheries-statistics.html"><i class="fa fa-check"></i><b>9</b> Basic Fisheries Statistics</a><ul>
<li class="chapter" data-level="9.1" data-path="basic-fisheries-statistics.html"><a href="basic-fisheries-statistics.html#calculating-landings"><i class="fa fa-check"></i><b>9.1</b> Calculating Landings</a></li>
<li class="chapter" data-level="9.2" data-path="basic-fisheries-statistics.html"><a href="basic-fisheries-statistics.html#calculating-catch-per-unit-effort-cpue"><i class="fa fa-check"></i><b>9.2</b> Calculating Catch-per-Unit-Effort (CPUE)</a></li>
<li class="chapter" data-level="9.3" data-path="basic-fisheries-statistics.html"><a href="basic-fisheries-statistics.html#calculating-percent-mature"><i class="fa fa-check"></i><b>9.3</b> Calculating Percent Mature</a></li>
<li class="chapter" data-level="9.4" data-path="basic-fisheries-statistics.html"><a href="basic-fisheries-statistics.html#helpful-resources-5"><i class="fa fa-check"></i><b>9.4</b> Helpful Resources</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="plotting-fisheries-data.html"><a href="plotting-fisheries-data.html"><i class="fa fa-check"></i><b>10</b> Plotting Fisheries Data</a><ul>
<li class="chapter" data-level="10.1" data-path="plotting-fisheries-data.html"><a href="plotting-fisheries-data.html#plotting-landings"><i class="fa fa-check"></i><b>10.1</b> Plotting Landings</a></li>
<li class="chapter" data-level="10.2" data-path="plotting-fisheries-data.html"><a href="plotting-fisheries-data.html#plotting-cpue"><i class="fa fa-check"></i><b>10.2</b> Plotting CPUE</a></li>
<li class="chapter" data-level="10.3" data-path="plotting-fisheries-data.html"><a href="plotting-fisheries-data.html#plotting-length-frequency"><i class="fa fa-check"></i><b>10.3</b> Plotting Length Frequency</a></li>
<li class="chapter" data-level="10.4" data-path="plotting-fisheries-data.html"><a href="plotting-fisheries-data.html#helpful-resources-6"><i class="fa fa-check"></i><b>10.4</b> Helpful Resources</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="wrapping-up.html"><a href="wrapping-up.html"><i class="fa fa-check"></i><b>11</b> Wrapping Up</a><ul>
<li class="chapter" data-level="11.1" data-path="wrapping-up.html"><a href="wrapping-up.html#r-packages-for-fishery-analysis"><i class="fa fa-check"></i><b>11.1</b> R Packages for Fishery Analysis</a></li>
<li class="chapter" data-level="11.2" data-path="wrapping-up.html"><a href="wrapping-up.html#additional-resources"><i class="fa fa-check"></i><b>11.2</b> Additional Resources</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">An introduction to basic fisheries analysis with R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="loading-fisheries-data" class="section level1">
<h1><span class="header-section-number">8</span> Loading Fisheries Data</h1>
<p>Next, you’ll load the data you’ll be using for the analysis using the <code>read_csv</code> function. First, create a new folder in your <a href="getting-started-with-rstudio.html#work-dir">working directory</a> called “_data“. Next, download the following two files onto your computer. Right click on each link, and save it in your”_data&quot; folder.</p>
<p><a href="https://raw.githubusercontent.com/SFG-UCSB/fishery-manageR/master/_data/sample_landings_data.csv">Right click and save-link-as to download landings data</a></p>
<p><a href="https://raw.githubusercontent.com/SFG-UCSB/fishery-manageR/master/_data/life_history_parameters.csv">Right click and save-link-as to download life history data</a></p>
<p>Next, you’ll load these two csv files into R. First load the landings data which includes catch, effort, and length measurements and store these data to a data frame called <code>landings_data</code>. Next, load the life history parameter data file and store these data to a data frame called <code>life_history_parameters</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">landings_data &lt;-<span class="st"> </span><span class="kw">read_csv</span>(<span class="st">&quot;_data/sample_landings_data.csv&quot;</span>)

life_history_parameters &lt;-<span class="st"> </span><span class="kw">read_csv</span>(<span class="st">&quot;_data/life_history_parameters.csv&quot;</span>)</code></pre></div>
<p>Let’s take a quick look at what’s in each of these data frames.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">landings_data</code></pre></div>
<pre><code>## # A tibble: 7,214 × 8
##     Year    Date Trip_ID Effort_Hours  Gear       Species Length_cm
##    &lt;int&gt;   &lt;chr&gt;   &lt;int&gt;        &lt;int&gt; &lt;chr&gt;         &lt;chr&gt;     &lt;dbl&gt;
## 1   2003 4/30/03       1           10  Trap Caesio cuning        36
## 2   2003 4/30/03       1           10  Trap Caesio cuning        29
## 3   2003 4/30/03       1           10  Trap Caesio cuning        34
## 4   2003 4/30/03       1           10  Trap Caesio cuning        36
## 5   2003 4/30/03       1           10  Trap Caesio cuning        34
## 6   2003 4/30/03       1           10  Trap Caesio cuning        28
## 7   2003 4/30/03       1           10  Trap Caesio cuning        30
## 8   2003 4/30/03       1           10  Trap Caesio cuning        27
## 9   2003 4/30/03       1           10  Trap Caesio cuning        33
## 10  2003 4/30/03       1           10  Trap Caesio cuning        35
## # ... with 7,204 more rows, and 1 more variables: Weight_g &lt;dbl&gt;</code></pre>
<p>The <code>landings_data</code> data frame is from a fishery-dependent landing site survey. The species included in this data set is <em>Caesio cuning</em>, a yellowtail fusilier. You can see the data frame has eight columns, with each row being an individual fish catch measurement. The columns include the year and date when the measurement was collected, the fishing trip ID, how many hours were fished for each trip, what gear was used, the species, the length of the fish, and the weight of the fish. We’ll be able to use these data to create length-frequency histograms that describe the size structure of the population, as well as trends in catch and CPUE.</p>
<p>One thing we should do is format the year and date columns to ensure that R knows these represent years and dates as we humans think of them. We can use the <code>mdy</code> and <code>year</code> functions from the lubridate package to do this, combined with the <code>mutate</code> function from the dplyr package. We start by taking the landings data frame we loaded into R, and working through a series of “pipes”, designated by the <code>%&gt;%</code> operation, which progressively analyzes the data from one step to the next. Essentially, the output of one line is fed into the input of the next line.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Start with the landings data frame</span>
landings_data &lt;-<span class="st"> </span>landings_data <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="co"># Turn the date column into a date format that R recognizes</span>
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">Date =</span> <span class="kw">mdy</span>(Date)) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="co"># Conver the gear column to a categorical factor</span>
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">Gear =</span> <span class="kw">as.factor</span>(Gear)) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="co"># Conver the gear column to a categorical factor</span>
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">Species =</span> <span class="kw">as.factor</span>(Species))</code></pre></div>
<p>One of the first things you should always do is quickly plot your raw data using <code>ggplot</code>. This can help you familiarize yourself with what’s contained in the data set, as well as look for any potential outliers or errors. We will come back to a more detailed description of plots and visualizations later, but below is some quick code to look at things. When using <code>ggplot</code>, first start with your data frame and initialize the ggplot by specifying the plot’s <em>aesthetics</em> (variables) using <code>aes()</code>. Then use the <code>+</code> operation to add at least one <em>geometry</em> (type of plot, such as a scatter plot) and any additional features to the plot. To learn more about <code>ggplot</code>, the <a href="https://www.rstudio.com/wp-content/uploads/2016/11/ggplot2-cheatsheet-2.1.pdf">Data Visualization with ggplot2 Cheat Sheet</a> is a very helpful resource, as is this <a href="http://www.cookbook-r.com/Graphs/">ggplot cookbook</a>.</p>
<p>The first figure just shows a point for every weight measurement over time.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Start with the landings data frame</span>
landings_data <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="co"># Initialize a ggplot of weight measurements versus year</span>
<span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x=</span>Date,<span class="dt">y=</span>Weight_g)) <span class="op">+</span>
<span class="st">  </span><span class="co"># Tell ggplot that the plot type should be a scatter plot</span>
<span class="st">  </span><span class="kw">geom_point</span>()</code></pre></div>
<p><img src="r-fisheries-introduction_files/figure-html/unnamed-chunk-37-1.png" width="672" /></p>
<p>The second figure shows a histogram of the length data.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Start with the landings data frame</span>
landings_data <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="co"># Initialize ggplot of data using the length column</span>
<span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(Length_cm)) <span class="op">+</span>
<span class="st">  </span><span class="co"># Tell ggplot that the plot type should be a histogram</span>
<span class="st">  </span><span class="kw">geom_histogram</span>()</code></pre></div>
<p><img src="r-fisheries-introduction_files/figure-html/unnamed-chunk-38-1.png" width="672" /></p>
<p>Let’s next look at the <code>life_history_parameters</code> data frame.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">head</span>(life_history_parameters)</code></pre></div>
<pre><code>## # A tibble: 1 × 11
##         Species              Common L_inf     k    t0         M     Wa
##           &lt;chr&gt;               &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;     &lt;dbl&gt;  &lt;dbl&gt;
## 1 Caesio cuning Yellowtail fusilier  62.2  0.32 -0.42 0.8915981 0.0208
## # ... with 4 more variables: Wb &lt;dbl&gt;, m50 &lt;dbl&gt;, m95 &lt;dbl&gt;, maxAge &lt;int&gt;</code></pre>
<p>The <code>life_history_parameters</code> data frame includes several important life history parameters that were found doing a literature review of this species. <em>L_infinity</em>, <em>k</em>, and <em>t0</em> describe the age-to-length relationship using the von Bertalanffy growth equation. <em>M</em> represents natural mortality. <em>Wa</em> and <em>Wb</em> describe the length-to-weight relationship. <em>m50</em> and <em>m95</em> describe the lengths at which 50% and 95% of the fish are mature, respectively. <em>maxAge</em> is the maximum age of the fish.</p>

</div>
            </section>

          </div>
        </div>
      </div>
<a href="packages-1.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="basic-fisheries-statistics.html" class="navigation navigation-next " aria-label="Next page""><i class="fa fa-angle-right"></i></a>

<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"weibo": false,
"instapper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/rstudio/bookdown-demo/edit/master/07-loading_fisheries_data.Rmd",
"text": "Edit"
},
"download": ["r-fisheries-introduction.pdf"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
